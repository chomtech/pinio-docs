Aby poprawnie skonfigurować MQTT, wykonaj następujące kroki w aplikacji Home Assistant (np. w systemie haos.app):
#### 1. Zaloguj się do Home Assistant
Zaloguj się do swojego serwera Home Assistant przez aplikację mobilną lub przeglądarkę 
(np. `https://twoja_domena.haos.app`).
#### 2. Przejdź do sklepu z dodatkami
Z menu po lewej stronie wybierz:
	`Ustawienia → Dodatki → Sklep z dodatkami (ikona koszyka w prawym dolnym rogu)`
#### 3. Zainstaluj brokera MQTT
1. Wyszukaj dodatek **Mosquitto broker**
2. Kliknij **Zainstaluj**
3. Po zakończeniu instalacji przejdź do zakładki **Konfiguracja**
#### 4. Dodaj dane logowania do brokera
W zakładce znajdź sekcję **Logins** i wprowadź dane logowania zgodnie z Twoim plikiem ==`config.py`==:
	![[Pasted image 20250708154502.png]]
Upewnij się, że:
```
login     =  Wartość mqtt_user w config.py    ZMIENIĆ ==========
password  =  Wartość mqtt_password w config.py   ===============
```
Po zapisaniu zmian Home Assistant poprosi o ponowne uruchomienie dodatku - potwierdź. 
W razie problemów uruchom ponownie cały Home Assistant.
#### 4.1. Dodanie kolejnego użytkownika
Kolejnego użytkownika tworzymy w identyczny sposób:
	![[Pasted image 20250708154545.png]]
Całość możesz także wprowadzić korzystając z trybu **YAML**, rozwijając menu klikając "**⋮**" w prawym górnym rogu:
	![[Pasted image 20250708154643.png]]
#### 5. Dodanie urządzenia
Z menu po lewej stronie wybierz:
	`Ustawienia → Urządzenia oraz usługi → MQTT`
Powinieneś zobaczyć:
![[brak_urzadzen.png]]
Kliknij:
	`KONFIGURUJ → SKONFIGURUJ OPCJE MQTT`
i uzupełnij pola zgodnie z wartościami z pliku ==`config.py`==:
```
	Prefiks wykrywania        =  new_device
	Temat wiadomości "birth"  =  status
	Temat wiadomości "will"   =  status
```
Po zapisaniu konfiguracji, Home Assistant wykryje urządzenie automatycznie i wyświetli:
![[1 urzadzenie i 5 encji.png]]
Urządzenie Pinio jest poprawnie połączone z brokerem MQTT i gotowe do pracy. 
Dostępne jest 5 encji (*entities*):
```
Sensory:
	in 18        # Wejście cyfrowe IN1
	in 19        # Wejście cyfrowe IN2
	Temperature  # 1-Wire (np. DS18B20)
Sterowanie:
	out 20       # Relay2 (przekaźnik)
	out 21       # Relay1 (przekaźnik)
```
Klikając `1 urządzenie`, przejdziesz do panelu MQTT, w którym uzyskasz dostęp do wszystkich encji, ich pełnej edycji oraz szybkiego dodania do dashboardu. Możesz tam także utworzyć automatyzacje, sceny, skrypty lub przejrzeć dziennik danych z urządzenia.

Wybierając `5 encji`, przejdziesz bezpośrednio do **Rejestru encji** powiązanych z urządzeniem.

W panelu dostępna jest również opcja zmiany nazwy urządzenia - kliknij ikonę ołówka w prawym górnym rogu, dodania go do obszaru i zmianę etykiety. **Warto zmienić nazwę teraz**, aby uniknąć późniejszych problemów z powodu zmienionych identyfikatorów encji.
Więcej informacji znajdziesz w: [[666. Dodatki]]