Tasmota to otwartoźródłowe oprogramowanie dla urządzeń opartych na ESP8266, pozwalające na łatwą konfigurację przez interfejs WWW oraz obsługę wielu protokołów.
#### 1. Wgrywanie Tasmota
Co będzie potrzebne:
- Konwerter USB na UART (np. FTDI FT232RL USB) i przewody połączeniowe
- Narzędzie [esptool](https://github.com/espressif/esptool/releases) do wgrywania firmware
- Obraz [tasmota.bin](https://ota.tasmota.com/tasmota/release/)

⚠️ Uwaga:
- Upewnij się, że konwerter USB-UART dostarcza napięcie **3,3V (VCC)**
- Nie zapomnij zainstalować sterowników do konwertera USB-UART
#### 2. Sprawdzenie portu COM
Podłącz konwerter USB do komputera i w **Menedżerze urządzeń** sprawdź jaki numer portu COM został mu przypisany:
	![[Pasted image 20250702150006.png]]
#### 3. Przygotowanie plików
Wypakuj archiwum `esptool.zip` i skopiuj do tego folderu obraz `tasmota.bin`:
	![[Pasted image 20250702150641.png]]
#### 4. Połączenie z ES.Pinio
Urządzenie  można połączyć z PC na 2 sposoby:
- Korzystając z wewnętrznego zasilacza płytki (12VDC) - bezpieczna połączenie 
- Korzystając z zasilania konwertera USB (3,3VDC)

⚠️ Uwaga:
- Zasilenie ESP-12F napięciem **WYŻSZYM** niż **3,3V** kończy się uszkodzeniem pamięci flash
#### Zalecane połączenie
Podłącz ES.Pinio do zasilania (12VDC) oraz ESP-12F do konwertera USB:
![[schemat polaczenia esp12f bez VCC.png]]
#### Alternatywne połączenie
Połączenie ES.Pinio korzystając wyłącznie z konwertera USB:

⚠️ Uwaga:
- Pamiętaj o przestawieniu zworki na konwerterze USB na **3,3V (VCC)!**
![[schemat polaczenia esp12f.png]]
#### 5. Uruchamianie trybu flashowania
Aby włączyć tryb, wykonaj następujące kroki:
1. Naciśnij i przytrzymaj jednocześnie przyciski **RST** oraz **BOOT**
2. Nie puszczając przycisku **BOOT**, puść przycisk **RST**
3. Świecąca dioda statusowa **STA** oznacza włączenie trybu
#### 6. Wgrywanie firmware
1. Otwórz **Wiersz poleceń (CMD)** jako **administrator**:
    - Kliknij menu Start
    - Wpisz `cmd`
    - Kliknij prawym przyciskiem myszy na *Wiersz poleceń* i wybierz *Uruchom jako administrator*
2. Przejdź do folderu, gdzie znajdują się pliki `esptool.exe` i `tasmota.bin`: 
    Wpisz polecenie `cd`, a następnie ścieżkę do tego folderu, np.:
    `cd C:\Users\chomtech\Desktop\ES.Pinio`
3. Uruchom komendę wgrywania firmware:
	`esptool.exe -p COM12 -b 115200 write_flash --flash_size detect 0x00000 tasmota.bin`
    gdzie:
	- `COM12` - numer portu szeregowego przypisanego do konwertera USB 
	- `tasmota.bin` - nazwa pliku z firmware 
#### 7. Zakończenie
Po flashowaniu powinieneś zobaczyć komunikat potwierdzający sukces procesu:
```
Wrote 671216 bytes (479357 compressed) at 0x00000000 in 42.7 seconds (effective 125.9 kbit/s)...
Hash of data verified.

Leaving...
Hard resetting via RTS pin...
```
Zresetuj urządzenie klikając przycisk **RST**
Urządzenie jest gotowe do dalszej konfiguracji - [[5. Konfiguracja ES.Pinio]]

---
## 🛠️ Problemy z poprawnym działaniem
W razie problemów z wgraniem oprogramowania lub dziwnym zachowaniem urządzenia, warto zacząć od przywrócenia ustawień domyślnych lub - jeśli to nie pomoże - całkowitego wymazania pamięci flash.
####  Przywrócenie domyślnej konfiguracji:
1. Połącz się z urządzeniem ES.Pinio wpisując jego **adres IP** w przeglądarce
2. Przejdź do`Configuration`
3. Kliknij `Reset` i potwierdź
4. Po ponownym uruchomieniu wykonaj kroki z rozdziału: [[5. Konfiguracja ES.Pinio]]
#### Wymazanie pamięć flash za pomocą `esptool`:
Jeśli reset konfiguracji nie rozwiązuje problemów, zaleca się wymazanie całej pamięci flash i ponowne wgranie firmware - dzięki temu unikniesz konfliktów z wcześniejszymi ustawieniami.
1. Podłącz ESP-12F do komputera i wprowadź go w **tryb flashowania** (przycisk **RST+BOOT**)
2. Otwórz **wiersz poleceń** (CMD) jako **administrator**    
3. Wpisz polecenie do wymazania pamięci flash:
	`esptool.exe -p COM12 erase_flash`
	
	Następnie wgraj nowy firmware:
	`esptool.exe -p COM12 -b 115200 write_flash --flash_size detect 0x00000 tasmota.bin
	gdzie:
	- `COM12` - numer portu szeregowego przypisanego do konwertera USB 
	- `tasmota.bin` - nazwa pliku z firmware
4. Zresetuj urządzenie (przycisk **RST**)
5. Przejdź do [[5. Konfiguracja ES.Pinio]]

⚠️ **Uwaga:** 
Wymazanie pamięci flash usuwa **całą zawartość**, w tym:
- firmware
- ustawienia Wi-Fi
- konfigurację GPIO
